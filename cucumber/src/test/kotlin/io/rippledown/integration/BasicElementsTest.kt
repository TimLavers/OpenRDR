package io.rippledown.integration

import io.rippledown.constants.kb.KB_CONTROL_DESCRIPTION
import io.rippledown.integration.utils.OpenRdUIProxy
import io.rippledown.integration.utils.dumpToText
import io.rippledown.integration.utils.findByDescriptionInTree
import kotlin.test.AfterTest
import kotlin.test.BeforeTest
import kotlin.test.Test

internal class BasicElementsTest : UITestBase() {

    @BeforeTest
    fun setup() {
//        serverProxy.start()
//        setupWebDriver()
    }

    @AfterTest
    fun cleanup() {
//        driverClose()
//        serverProxy.shutdown()
    }

    @Test
    fun basicElements() {
//        val headingElement = driver.findElement(By.id("main_heading"))
//        assertEquals(headingElement.text, "Open RippleDown")

        val proxy = OpenRdUIProxy()
        val window = proxy.appWindow
        println("windown: $window")

        val kbControl = window.accessibleContext.findByDescriptionInTree(KB_CONTROL_DESCRIPTION)!!
        println("kbControl: $kbControl")
        val actionCount = kbControl.accessibleAction.accessibleActionCount
        println("action count: $actionCount")
        val action0 = kbControl.accessibleAction
        println("action0: $action0")
        val actionDescription = kbControl.accessibleAction.getAccessibleActionDescription(0)
        println("actionDescription: $actionDescription")
        action0.doAccessibleAction(0)
        println("clicked-------------------------------")
        window.accessibleContext.dumpToText(0)
    }
}